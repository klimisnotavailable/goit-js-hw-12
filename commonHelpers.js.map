{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\"use strict\"\n\n\nconst form = document.querySelector(\".search-form\")\nconst formInput = document.querySelector(\".search-input\")\nconst formBtn = document.querySelector(\".form-button\")\n\nconst KEY = '42543604-e9bb6c6b12fe7ca69b0735960';\nconst q = formInput.value;\nconst image_type = \"photo\";\nconst orientation = \"horizontal\";\nconst safesearch = true;\nconst BASE_URL = \"https://pixabay.com/api/\"\n\n\nexport const checkForm = function checkForm(formInput) {\n    if (formInput.value.trim() == \"\") {\n        formBtn.setAttribute(\"disabled\", \"disabled\")\n    } else {\n    formBtn.removeAttribute(\"disabled\", \"disabled\")\n    }\n}\n\n\n\n","\"use strict\"\n\nexport function generateMarkup(result) {\n    return result.hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<li>\n                    <a href=\"${webformatURL}\"><img class=\"large-image\" src=\"${largeImageURL}\" alt=\"${tags}\" width=\"360px\" height=\"152px\" title=\"${tags}\"></a>\n                    <div class=\"image-statistics\">\n\n                    <span>\n                    <h3>Likes</h3>\n                    <p>${likes}</p>                 \n                    </span>\n\n                    <span>\n                    <h3>Views</h3>\n                    <p>${views}</p>\n                    </span>\n\n                    <span>\n                    <h3>Comments</h3>\n                    <p>${comments}</p>\n                    </span>\n\n                    <span>\n                    <h3>Downloads</h3>\n                    <p>${downloads}</p>\n                    </span>\n                    </div>\n                </li>`\n                }).join(\"\")\n}\n\n","\"use strict\"\n\n\n\n\nconst form = document.querySelector(\".search-form\");\nconst formInput = document.querySelector(\".search-input\");\nconst loadBtn = document.querySelector(\".load-button\")\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\nconst KEY = '42543604-e9bb6c6b12fe7ca69b0735960';\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nconst searchParams = new URLSearchParams({\n    orientation: \"horizontal\",\n    safesearch: true,\n    image_type: \"photo\",\n    per_page:15,\n})\n\n\nimport { checkForm } from \"./js/pixabay-api\";\nimport { generateMarkup } from \"./js/render-functions\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\"\n\nlet page = 1;\nconst ligthbox = new SimpleLightbox(\".gallery  a\")\n\n\nfunction createURL() {\n    return `${BASE_URL}?key=${KEY}&q=${formInput.value}&${searchParams}&page=${page++}`\n}\n\nform.addEventListener(\"input\", (event) => {\n    checkForm(formInput)\n})\n\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault()\n    loader.classList.remove(\"visually-hidden\")\n    page = 1\n\n    gallery.innerHTML = \"\";\n\n    async function getGallery() {\n        try {\n            return await axios.get(createURL())\n        }\n        catch {\n            throw new Error(\"Promblems with the fetch!\")\n        }\n    }\n\n    getGallery().then(data => {\n\n        if (data.data.hits.length == 0) {\n            throw new Error(\"No such images!\")\n        }\n\n        gallery.insertAdjacentHTML(\"beforeend\", generateMarkup(data.data))\n\n        ligthbox.refresh()\n\n        loadBtn.classList.remove(\"visually-hidden\")\n\n    })\n        \n    .catch(error => {\n        \n        iziToast.error({\n            message:\"Sorry, there are no images matching your search query. Please try again!\",\n        })\n            \n    })\n        \n    .finally(() => {\n        \n        loader.classList.add(\"visually-hidden\")\n\n    })\n    \n})\n\n\nloadBtn.addEventListener(\"click\", (event) => {\n    loader.classList.remove(\"visually-hidden\")\n    loadBtn.classList.add(\"visually-hidden\")\n\n    async function getGallery() {\n        try {\n            return await axios.get(createURL())\n        }\n        catch {\n            throw new Error(\"We're sorry, but you've reached the end of search results.\")\n        }\n    }\n\n    getGallery().then((data) => {\n\n        if (data.data.hits.length === 0) {\n            throw new Error(\"No such images!\")\n        }\n\n        gallery.insertAdjacentHTML(\"beforeend\", generateMarkup(data.data))\n\n        const elHeight = gallery.firstChild.getBoundingClientRect()\n        window.scrollBy(0, elHeight.height * 2)\n\n        if (data.data.hits.length < searchParams.get(\"per_page\")) {\n            loadBtn.classList.add(\"visually-hidden\")\n        }\n        \n        loadBtn.classList.remove(\"visually-hidden\")\n\n    ligthbox.refresh()\n\n\n    }).catch((error) => {\n\n        iziToast.error({\n            message:\"We're sorry, but you've reached the end of search results.\",\n        })\n\n        loadBtn.classList.add(\"visually-hidden\")\n\n    }).finally(() => {\n        \n        loader.classList.add(\"visually-hidden\")\n\n    })\n\n})"],"names":["formInput","formBtn","checkForm","generateMarkup","result","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loadBtn","gallery","loader","KEY","BASE_URL","searchParams","page","ligthbox","SimpleLightbox","createURL","event","getGallery","axios","data","error","iziToast","elHeight"],"mappings":"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"}